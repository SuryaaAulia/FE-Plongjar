<div class="lecturer-search-overlay">
  <div class="lecturer-search-modal">
    <div class="header">
      <h1 class="title">Cari Dosen</h1>
      <button class="close-button" (click)="requestClose()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="search-bar">
      <input
        type="text"
        [(ngModel)]="searchNameTerm"
        (ngModelChange)="onSearchTermChange()"
        placeholder="Nama Dosen"
        class="search-input-field lecturer-name-input"
        [disabled]="isLoading"
      />
      <span class="search-separator">/</span>
      <input
        type="text"
        [(ngModel)]="searchCodeTerm"
        (ngModelChange)="onSearchTermChange()"
        placeholder="Kode Dosen"
        class="search-input-field lecturer-code-input"
        [disabled]="isLoading"
      />
      <button
        (click)="onSearchTermChange()"
        class="search-button-new"
        [disabled]="isLoading"
      >
        <i class="fas fa-search"></i>
      </button>
    </div>

    <div *ngIf="!hasSearched" class="initial-state-modal">
      <img
        src="assets/images/search_dosen.svg"
        alt="Lecturer Search Placeholder"
      />
    </div>

    <div *ngIf="hasSearched" class="results-state">
      <div *ngIf="isLoading" class="loading-state">
        <app-loading-spinner></app-loading-spinner>
      </div>

      <div *ngIf="error" class="error-state">
        <p>{{ error }}</p>
      </div>

      <div *ngIf="!isLoading && !error">
        <div
          *ngIf="searchResults.length > 0; else noResults"
          class="results-list"
        >
          <div
            *ngFor="let lecturer of searchResults"
            class="result-item"
            (click)="selectAndClose(lecturer)"
          >
            <span class="lecturer-name">{{ lecturer.name }}</span>
            <span class="lecturer-code">{{ lecturer.lecturerCode }}</span>
            <button
              class="add-button-modal"
              (click)="$event.stopPropagation(); selectAndClose(lecturer)"
            >
              <i class="fas fa-plus"></i>
            </button>
          </div>
        </div>

        <ng-template #noResults>
          <app-search-not-found
            [keyword]="searchKeyword"
          ></app-search-not-found>
        </ng-template>

        <div
          *ngIf="searchResults.length > 0 && totalItems > 0"
          class="pagination-container"
        >
          <div class="pagination-controls">
            <span class="pagination-info">
              Menampilkan {{ displayedItemsStart }} -
              {{ displayedItemsEnd }} dari {{ totalItems }} entri
            </span>

            <div class="page-buttons" *ngIf="totalItems > itemsPerPage">
              <button (click)="prevPage()" [disabled]="currentPage === 1">
                &lt;
              </button>
              <span>{{ currentPage }}</span>
              <button
                (click)="nextPage()"
                [disabled]="currentPage * itemsPerPage >= totalItems"
              >
                &gt;
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
